---
import AuthLayout from "@/layouts/AuthLayout.astro";
import { LoginForm } from "@/components/auth/LoginForm";
import { Alert, AlertDescription } from "@/components/ui/alert";

// Middleware handles redirect for authenticated users

// Check for registration success message
const registered = Astro.url.searchParams.get("registered") === "true";
---

<AuthLayout title="Logowanie | AI Task Manager">
  <div class="w-full space-y-4">
    {
      registered && (
        <Alert
          variant="default"
          class="border-green-500 bg-green-50 text-green-900 dark:bg-green-950 dark:text-green-100"
        >
          <AlertDescription>
            Rejestracja zakończona pomyślnie! Sprawdź swoją skrzynkę email, aby aktywować konto.
          </AlertDescription>
        </Alert>
      )
    }
    <LoginForm client:load />
  </div>
</AuthLayout>
